# -*- coding: utf-8 -*-
__author__ = 'ducmanh86'

import os
import json
import datetime.datetime as Time

def write_log(data=""):
    log = None
    try:
        log = open(os.getcwd() + "/logs/user.log", "a+")
        res = dict(time=Time.time())
        log.write(data + "\n")
        log.close()
    except Exception as ex:
        if log is not None:
            log.close()
        return dict(error=ex)
    return dict(data=data)


def read_log(endline="\n"):
    log = None
    try:
        log = open(os.getcwd() + "/logs/user.log", "r+")
        data = log.readlines()
        data = endline.join(data)
        data.replace("\n", "")
        log.close()
    except Exception as ex:
        if log is not None:
            log.close()
        return dict(error=ex)
    return dict(data=data)


def clear_log():
    log = None
    try:
        log = open(os.getcwd() + "/logs/user.log", "w+")
        log.write("")
        log.close()
    except Exception as ex:
        if log is not None:
            log.close()
        return dict(error=ex)
    return dict(data="")